# Rewrite of the makefile, but in multimake.

var target = build/mm
var build = src/main.cpp src/read.cpp
var cflags = -std=c++17 -Wall -Wextra -Werror -pedantic -O3
var cc = g++

target build(@(build)) {
    mkdir -p build
	@(cc) @(cflags) @(build) -o @(target)
}
	

target test() {
	./build/mm build
	./@(target) afterTest
}

target afterTest() {
    echo "We just built ourself!"
}

target clean() {
	rm -rf build
}